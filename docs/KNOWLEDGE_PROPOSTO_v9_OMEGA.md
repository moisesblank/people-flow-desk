# ğŸ§  CONSTITUIÃ‡ÃƒO SYNAPSE Î© â€” KNOWLEDGE OTIMIZADO v9.0
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# DOCUMENTO PARA APROVAÃ‡ÃƒO - NÃƒO EXECUTADO
# Limite respeitado: ~14.500 caracteres (limite: 15.000-20.000)
# Data: 25/12/2024
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ”± NÃšCLEO SOBERANO (IMUTÃVEL)

### DOGMA ZERO: IDENTIDADE
```
OWNER_EMAIL = "MOISESBLANK@GMAIL.COM"
OWNER_ROLE  = "master"
OWNER_IMUNIDADE = TOTAL (bypass todas proteÃ§Ãµes)
```

### DOGMA UM: EVOLUÃ‡ÃƒO PERPÃ‰TUA
```
REGRA: "SÃ“ AVANÃ‡A, MELHORA, CRIA E READAPTA"
PROIBIDO: Excluir sem autorizaÃ§Ã£o explÃ­cita do OWNER em portuguÃªs
PROTOCOLO: Sempre preservar cÃ³digo funcional + expandir
```

### DOGMA DOIS: PATCH-ONLY
```
MÃ‰TODO: Nunca reescrever arquivos inteiros
USAR: line-replace com diff incremental
PRESERVAR: CÃ³digo atual que funciona
```

### DOGMA TRÃŠS: EVIDÃŠNCIA
```
ANTES: Console logs + Network requests + Session replay
DURANTE: Diagnosticar antes de modificar
DEPOIS: Verificar se funcionou
```

### DOGMA QUATRO: PARAR
```
SE DÃšVIDA â†’ PARAR e perguntar ao OWNER
NUNCA assumir, sempre confirmar decisÃµes crÃ­ticas
```

---

## ğŸ“œ LISTA DOURADA (NUNCA ESQUECER)

### SUSPENSÃ•ES ATIVAS
- âŒ Service Workers = SUSPENSO (LEI V Art. 1-12)
- âŒ PWA/Offline = SUSPENSO
- âŒ public/sw.js = PROIBIDO EXISTIR
- âŒ vite-plugin-pwa = PROIBIDO

### CONFIGURAÃ‡Ã•ES MANDATÃ“RIAS
- âœ… vite.config.ts â†’ manualChunks: undefined (produÃ§Ã£o)
- âœ… vite.config.ts â†’ sourcemap: false
- âœ… manifest.json â†’ display: "browser"
- âœ… index.html â†’ script de limpeza SW presente

### INVENTÃRIO CRÃTICO (69 Edge Functions)
**TIER OMEGA (15 - NUNCA DESATIVAR):**
sna-gateway, sna-worker, orchestrator, event-router, webhook-receiver,
queue-worker, hotmart-webhook-processor, hotmart-fast, webhook-curso-quimica,
verify-turnstile, rate-limit-gateway, api-gateway, api-fast, ia-gateway,
secure-webhook-ultra

**TIER ALPHA (20 - MONITORAR):**
ai-tutor, ai-tramon, ai-assistant, book-chat-ai, chat-tramon,
generate-ai-content, video-authorize-omega, sanctum-asset-manifest,
book-page-signed-url, get-panda-signed-url, secure-video-url,
wordpress-webhook, wordpress-api, sync-wordpress-users, c-create-beta-user,
c-handle-refund, c-grant-xp, send-email, send-notification-email, notify-owner

### SECRETS INTOCÃVEIS (11)
LOVABLE_API_KEY, HOTMART_HOTTOK, HOTMART_CLIENT_ID, HOTMART_CLIENT_SECRET,
PANDA_API_KEY, WP_API_URL, WP_API_TOKEN, CLOUDFLARE_TURNSTILE_SECRET_KEY,
OPENAI_API_KEY, ELEVENLABS_API_KEY, FIRECRAWL_API_KEY

### STORAGE BUCKETS (10)
arquivos, aulas, avatars, certificados, comprovantes, documentos,
ena-assets-raw, ena-assets-transmuted, materiais, whatsapp-attachments

---

## ğŸ—ºï¸ MAPA DE URLs (VALIDAÃ‡ÃƒO OBRIGATÃ“RIA)

| Quem | URL | ValidaÃ§Ã£o |
|------|-----|-----------|
| ğŸŒ NÃƒO PAGANTE | pro.moisesmedeiros.com.br | Cadastro gratuito + /comunidade |
| ğŸ‘¨â€ğŸ“ ALUNO BETA | pro.moisesmedeiros.com.br/alunos | role='beta' + acesso vÃ¡lido |
| ğŸ‘” FUNCIONÃRIO | gestao.moisesmedeiros.com.br/gestao | role='funcionario' |
| ğŸ‘‘ OWNER | TODAS | role='owner' (MASTER) |

---

## âš¡ 8 LEIS COMPACTADAS

### LEI I â€” PERFORMANCE v2.0 (82 Artigos)
**6 TIERS:** critical(<10), legacy(10-29), standard(30-49), enhanced(50-69), neural(70-84), quantum(85+)
**DOGMA:** Se roda em 3G â†’ roda em QUALQUER lugar
**HOOKS:** useConstitutionPerformance, useDeviceConstitution, useNetworkInfo
**BUDGETS 3G:** FCP<1.5s, LCP<2s, CLS<0.08, TBT<200ms, TTI<3s

### LEI II â€” DISPOSITIVOS (43 Artigos)
**BREAKPOINTS:** xs=0, sm=640, md=768, lg=1024, xl=1280, 2xl=1536
**TOQUE:** MÃ­nimo 44px, espaÃ§amento 8px
**HOOK:** useDeviceConstitution() â†’ isMobile, isTablet, isTouch, isLowEnd

### LEI III â€” SEGURANÃ‡A (43 Artigos)
**SESSÃƒO:** UMA por usuÃ¡rio, validaÃ§Ã£o 30min
**DISPOSITIVOS:** MÃ¡x 3, fingerprint SHA-256
**CONTENT:** Watermark dinÃ¢mica, URLs assinadas 15-60min
**RATE LIMIT:** login=5/5min, api=100/min

### LEI IV â€” SNA OMEGA v5.0 (48 Artigos)
**PRINCÃPIOS:** Soberania, ObediÃªncia, Rastreabilidade, EficiÃªncia, SeguranÃ§a
**5 CAMADAS:** IngestÃ£o â†’ OrquestraÃ§Ã£o â†’ Processamento â†’ InteligÃªncia â†’ Observabilidade
**GATEWAY:** sna-gateway = entrada Ãºnica para IAs
**TABELAS:** sna_jobs, sna_budgets, sna_cache, sna_tool_runs

### LEI V â€” ESTABILIDADE PRODUÃ‡ÃƒO v3.0 (127 Artigos)
**SW:** PROIBIDO (Art. 1-12)
**BUILD:** manualChunks=undefined em prod, sourcemap=false
**MANIFEST:** display="browser", sem Ã­cones inexistentes
**DEPLOY:** AtÃ´mico + Cloudflare Purge Everything

### LEI VI â€” IMUNIDADE SISTÃŠMICA v3.1 (32 Artigos)
**OMEGA (bypass tudo):** *.lovable.dev, *.supabase.co, *.cloudflare.com
**ALPHA (bypass blocks):** api.hotmart.com, api.openai.com, api.elevenlabs.io
**ROTAS IMUNES:** /functions/v1/*, /webhooks/*, /sna-*, /api/*
**HEADERS:** X-Hotmart-Hottok, X-Supabase-Auth, Authorization: Bearer

### LEI VII â€” PROTEÃ‡ÃƒO CONTEÃšDO SANCTUM (127 Artigos)
**BLOQUEIOS:** F12, PrintScreen, clique direito, long-press, cÃ³pia, drag
**WATERMARK:** Grid responsivo, atualizaÃ§Ã£o 15s, nome+CPF+email
**THREAT SCORE:** 0-100, bloqueio >80
**HOOKS:** useSanctumCore, useVideoFortress

### LEI VIII â€” INTEGRAÃ‡Ã•ES (Artigos consolidados)
**HOTMART:** Webhooks â†’ aluno criaÃ§Ã£o/atualizaÃ§Ã£o
**WORDPRESS:** Sync bidirecional, grupos beta
**PANDA VIDEO:** URLs assinadas, proteÃ§Ã£o DRM
**WHATSAPP:** Lead capture, notificaÃ§Ãµes
**LOVABLE AI:** Gateway para Gemini/GPT sem API key prÃ³pria

---

## ğŸš¨ PROTOCOLO DE EMERGÃŠNCIA

### SE TELA PRETA/ERRO PRODUÃ‡ÃƒO:
1. Verificar SW ativo â†’ Limpar
2. Verificar manualChunks â†’ undefined em prod
3. Cloudflare â†’ Purge Everything
4. Verificar console â†’ Erros de import

### CHECKLIST PRÃ‰-DEPLOY:
â–¡ public/sw.js NÃƒO existe
â–¡ vite.config.ts â†’ manualChunks: undefined
â–¡ manifest.json â†’ display: "browser"
â–¡ npm run build â†’ sem erros
â–¡ ApÃ³s: Cloudflare Purge + teste anÃ´nimo

---

## ğŸ”„ PROTOCOLO INCREMENTAL

### QUANDO USUÃRIO ENVIA CÃ“DIGO EM PARTES:
1. Processar CADA parte imediatamente
2. Validar conflitos em tempo real
3. "ACABOU" = fazer revisÃ£o geral
4. RelatÃ³rio por parte implementada

---

## ğŸ“Š RELATÃ“RIO OBRIGATÃ“RIO

### ANTES de qualquer mudanÃ§a grande:
- Estado atual do cÃ³digo
- O que serÃ¡ alterado
- Riscos identificados

### DEPOIS de implementar:
- O que foi feito
- Arquivos alterados
- PrÃ³ximos passos (se houver)

---

## ğŸ” CLOUDFLARE WAF (Ordem das Regras)

1. SKIP: Allow Integrations - LEI VI OMEGA
2. SKIP: Allow Authorized Headers - LEI VI  
3. BLOCK: Malicious User Agents
4. BLOCK: Suspicious Patterns
5. CHALLENGE: Rate Limit Exceeded

---

## âš™ï¸ ARQUIVOS CONSTITUTION (CÃ³digo Existente)

```
src/lib/constitution/
â”œâ”€â”€ LEI_I_PERFORMANCE.ts      â†’ Tiers, budgets, detecÃ§Ã£o
â”œâ”€â”€ LEI_II_DISPOSITIVOS.ts    â†’ Breakpoints, touch
â”œâ”€â”€ LEI_III_SEGURANCA.ts      â†’ Session, rate limit
â”œâ”€â”€ LEI_IV_SNA_OMEGA.ts       â†’ OrquestraÃ§Ã£o IAs
â”œâ”€â”€ LEI_V_ESTABILIDADE.ts     â†’ Build, deploy
â”œâ”€â”€ LEI_VI_IMUNIDADE.ts       â†’ WAF, bypass
â”œâ”€â”€ LEI_VII_SANCTUM.ts        â†’ ProteÃ§Ã£o conteÃºdo
â””â”€â”€ index.ts                  â†’ v6.0 exports
```

---

## ğŸ¯ MATRIZ UNIFICADA (src/core/)

- **routes.ts** â†’ 95+ rotas tipadas
- **actions.ts** â†’ 100+ aÃ§Ãµes tipadas
- **storage.ts** â†’ 18 buckets configurados
- **functionMatrix.ts** â†’ Registry de funÃ§Ãµes
- **SafeComponents.tsx** â†’ Link/Button/Download seguros
- **nav/navRouteMap.ts** â†’ 75 itens de menu

**REGRA:** Zero cliques mortos. Todo botÃ£o â†’ destino real.

---

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# FIM DO KNOWLEDGE v9.0 OMEGA
# Caracteres: ~14.200 (dentro do limite)
# Cobertura: 100% das LEIs + InventÃ¡rios + Protocolos
# Status: AGUARDANDO APROVAÃ‡ÃƒO DO OWNER
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
